

<!DOCTYPE html>
<html class="writer-html5" lang="python" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Code migration &mdash; Arctern 0.3.0 documentation</title>
  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/graphviz.css" type="text/css" />

  
  
  
  

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/language_data.js"></script>
        <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="RESTful Service" href="../restful/restful.html" />
    <link rel="prev" title="Install and deploy Arctern on a Spark cluster" href="../install/cluster_installation.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home" alt="Documentation Home"> Arctern
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../quick_start/quick_start.html">Quick Start</a></li>
<li class="toctree-l1"><a class="reference internal" href="../feature_description/feature_description.html">Feature Description</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api_reference/api_reference.html">API Reference</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="cluster.html">Transform from standalone version to distributed version</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../install/cluster_installation.html">Install and deploy Arctern on a Spark cluster</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Code migration</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../restful/restful.html">RESTful Service</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Arctern</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="cluster.html">Transform from standalone version to distributed version</a> &raquo;</li>
        
      <li>Code migration</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/cluster/cluster_code.md.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="code-migration">
<h1>Code migration<a class="headerlink" href="#code-migration" title="Permalink to this headline">Â¶</a></h1>
<p>Arctern is a fast and scalable spatiotemporal data analysis framework. A challenge of scalability is to implement consistent data analysis and processing APIs across platforms from standalone systems to clustered systems and clouds. With the help of the Koalas APIs, We have developed a Spark-based distributed version of GeoSeries and GeoDataFame, which are similar to their counterparts in the standalone version.</p>
<p>This article describes how to modify the codes in the standalone version so that you can run them in a distributed environment.</p>
<p>The standalone GeoSeries and GeoDataFrame are located in the <code class="docutils literal notranslate"><span class="pre">arctern</span></code> Python package, and the corresponding distributed classes are located in the <code class="docutils literal notranslate"><span class="pre">arctern_spark</span></code> Python package. In most cases, you only need to modify the import methods of GeoSeries and GeoDataFrame to migrate your codes:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># Standalone Python environment</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">arctern.geoseries</span> <span class="kn">import</span> <span class="n">GeoSeries</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">data</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;POLYGON((0 0,1 0,1 1,0 1,0 0))&quot;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="s2">&quot;POLYGON((1 3, 6 3, 3 6, 1 3))&quot;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="s2">&quot;MULTILINESTRING ((0 0,4 0),(5 0,6 0))&quot;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="s2">&quot;POLYGON((0 0,0 8,8 8,8 0,0 0))&quot;</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">data</span> <span class="o">=</span> <span class="n">GeoSeries</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">rst</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">area</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">rst</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Distributed Spark environment</span>
<span class="o">&gt;&gt;&gt;</span> <span class="kn">from</span> <span class="nn">arctern_spark.geoseries</span> <span class="kn">import</span> <span class="n">GeoSeries</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">data</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;POLYGON((0 0,1 0,1 1,0 1,0 0))&quot;</span><span class="p">,</span>
<span class="o">...</span>     <span class="s2">&quot;POLYGON((1 3, 6 3, 3 6, 1 3))&quot;</span><span class="p">,</span>
<span class="o">...</span>     <span class="s2">&quot;MULTILINESTRING ((0 0,4 0),(5 0,6 0))&quot;</span><span class="p">,</span>
<span class="o">...</span>     <span class="s2">&quot;POLYGON((0 0,0 8,8 8,8 0,0 0))&quot;</span><span class="p">]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">data</span> <span class="o">=</span> <span class="n">GeoSeries</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">rst</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">area</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">print</span><span class="p">(</span><span class="n">rst</span><span class="p">)</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">arctern_spark.GeoSeries</span></code> can be constructed from <code class="docutils literal notranslate"><span class="pre">list-like</span></code> type data and <code class="docutils literal notranslate"><span class="pre">koalas.Series</span></code>. <code class="docutils literal notranslate"><span class="pre">list-like</span></code> types include list, tuple, set, numpy.array and pandas.Series.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">arctern_spark.geoseries</span> <span class="kn">import</span> <span class="n">GeoSeries</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">databricks.koalas</span> <span class="k">as</span> <span class="nn">ks</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">list_data</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;POLYGON((0 0,1 0,1 1,0 1,0 0))&quot;</span><span class="p">,</span> <span class="s2">&quot;POLYGON((0 0,0 8,8 8,8 0,0 0))&quot;</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pser</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">list_data</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;geometry_p&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">kser</span> <span class="o">=</span> <span class="n">ks</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">list_data</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;geometry_k&quot;</span><span class="p">)</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">aser</span> <span class="o">=</span> <span class="n">GeoSeries</span><span class="p">(</span><span class="n">list_data</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;geometry&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">aser</span><span class="o">.</span><span class="n">area</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">aser</span> <span class="o">=</span> <span class="n">GeoSeries</span><span class="p">(</span><span class="n">pser</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">aser</span><span class="o">.</span><span class="n">area</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">aser</span> <span class="o">=</span> <span class="n">GeoSeries</span><span class="p">(</span><span class="n">kser</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">aser</span><span class="o">.</span><span class="n">area</span><span class="p">)</span>
</pre></div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../restful/restful.html" class="btn btn-neutral float-right" title="RESTful Service" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="../install/cluster_installation.html" class="btn btn-neutral float-left" title="Install and deploy Arctern on a Spark cluster" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright 2020, zilliz
      <span class="lastupdated">
        Last updated on Aug 04, 2020.
      </span>

    </p>
  </div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>