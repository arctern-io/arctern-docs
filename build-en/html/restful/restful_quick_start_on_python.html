

<!DOCTYPE html>
<html class="writer-html5" lang="python" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Quick Start (Python backend) &mdash; Arctern 0.3.0 documentation</title>
  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/graphviz.css" type="text/css" />

  
  
  
  

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/language_data.js"></script>
        <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Quick Start (PySpark backend)" href="restful_quick_start_on_spark.html" />
    <link rel="prev" title="Install and deploy Arctern RESTful server" href="../install/webserver_installation_config.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home" alt="Documentation Home"> Arctern
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../quick_start/quick_start.html">Quick Start</a></li>
<li class="toctree-l1"><a class="reference internal" href="../feature_description/feature_description.html">Feature Description</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api_reference/api_reference.html">API Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cluster/cluster.html">Transform from standalone version to distributed version</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="restful.html">RESTful Service</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../install/webserver_installation_config.html">Install and deploy Arctern RESTful server</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Quick Start (Python backend)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#configure-and-start-on-server-side">Configure and start on server side</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#start-the-server">Start the server</a></li>
<li class="toctree-l4"><a class="reference internal" href="#prepare-data">Prepare data</a></li>
<li class="toctree-l4"><a class="reference internal" href="#install-dependent-packages">Install dependent packages</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#call-api">Call API</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#import-data">Import data</a></li>
<li class="toctree-l4"><a class="reference internal" href="#query-information-from-data-table">Query information from data table</a></li>
<li class="toctree-l4"><a class="reference internal" href="#generate-heat-map">Generate heat map</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="restful_quick_start_on_spark.html">Quick Start (PySpark backend)</a></li>
<li class="toctree-l2"><a class="reference internal" href="restful_config.html">Arctern RESTful Server Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="api/api.html">RESTful API</a></li>
</ul>
</li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Arctern</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="restful.html">RESTful Service</a> &raquo;</li>
        
      <li>Quick Start (Python backend)</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/restful/restful_quick_start_on_python.md.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="quick-start-python-backend">
<h1>Quick Start (Python backend)<a class="headerlink" href="#quick-start-python-backend" title="Permalink to this headline">¶</a></h1>
<p>This article takes the New York taxi dataset as an example and uses Python as the data processing backend to illustrate how to import, compute, and display data through Arctern RESTful API.</p>
<blockquote>
<div><p><strong>Note:</strong> By default, all sample codes in this section are run in Python 3.7 environment. To run in other Python environments, you need to adapt the code accordingly.</p>
</div></blockquote>
<div class="section" id="configure-and-start-on-server-side">
<h2>Configure and start on server side<a class="headerlink" href="#configure-and-start-on-server-side" title="Permalink to this headline">¶</a></h2>
<div class="section" id="start-the-server">
<h3>Start the server<a class="headerlink" href="#start-the-server" title="Permalink to this headline">¶</a></h3>
<p>Start the server before calling Arctern RESTful API. For details, see <a class="reference internal" href="../install/webserver_installation_config.html"><span class="doc">Install and deploy Arctern RESTful server</span></a>.</p>
</div>
<div class="section" id="prepare-data">
<h3>Prepare data<a class="headerlink" href="#prepare-data" title="Permalink to this headline">¶</a></h3>
<p>In the following example, you need to use the New York taxi dataset. This dataset contains the operating records of taxis in New York City in 2009. The meaning of each field is as follows:</p>
<table border="1" class="docutils">
<thead>
<tr>
<th align="left">Field</th>
<th align="left">Description</th>
<th align="left">Type</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left">VendorID</td>
<td align="left">Name of vendor</td>
<td align="left">string</td>
</tr>
<tr>
<td align="left">tpep_pickup_datetime</td>
<td align="left">Pickup time</td>
<td align="left">string</td>
</tr>
<tr>
<td align="left">tpep_dropoff_datetime</td>
<td align="left">Dropoff time</td>
<td align="left">string</td>
</tr>
<tr>
<td align="left">passenger_count</td>
<td align="left">Number of passengers</td>
<td align="left">long</td>
</tr>
<tr>
<td align="left">trip_distance</td>
<td align="left">Distance of the trip</td>
<td align="left">double</td>
</tr>
<tr>
<td align="left">pickup_longitude</td>
<td align="left">Longitude of the pickup location</td>
<td align="left">double</td>
</tr>
<tr>
<td align="left">pickup_latitude</td>
<td align="left">Latitude of the pickup location</td>
<td align="left">double</td>
</tr>
<tr>
<td align="left">dropoff_longitude</td>
<td align="left">Longitude of the dropoff location</td>
<td align="left">double</td>
</tr>
<tr>
<td align="left">dropoff_latitude</td>
<td align="left">Latitude of the dropoff location</td>
<td align="left">double</td>
</tr>
<tr>
<td align="left">fare_amount</td>
<td align="left">Fare amount for the trip</td>
<td align="left">double</td>
</tr>
<tr>
<td align="left">tip_amount</td>
<td align="left">Tip amount</td>
<td align="left">double</td>
</tr>
<tr>
<td align="left">total_amount</td>
<td align="left">Total charge</td>
<td align="left">double</td>
</tr>
<tr>
<td align="left">buildingid_pickup</td>
<td align="left">ID of the building at pickup location</td>
<td align="left">long</td>
</tr>
<tr>
<td align="left">buildingid_dropoff</td>
<td align="left">ID of the building at dropoff location</td>
<td align="left">long</td>
</tr>
<tr>
<td align="left">buildingtext_pickup</td>
<td align="left">Description of the building at pickup location</td>
<td align="left">string</td>
</tr>
<tr>
<td align="left">buildingtext_dropoff</td>
<td align="left">Description of the building at dropoff location</td>
<td align="left">string</td>
</tr>
</tbody>
</table><blockquote>
<div><p><strong>Note:</strong> This dataset has 200000 rows. The time format is <code class="docutils literal notranslate"><span class="pre">yyyy-MM-dd</span> <span class="pre">HH:mm::ss</span> <span class="pre">XXXXX</span></code>, such as &quot;2009-04-12 03:16:33 +00:00&quot;.</p>
</div></blockquote>
<p>Download the New York taxi dataset:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ wget https://media.githubusercontent.com/media/arctern-io/arctern-resources/benchmarks/benchmarks/dataset/nyc_taxi/0_2M_nyc_taxi_and_building/0_2M_nyc_taxi_and_building.csv
</pre></div>
</div>
<p>Check if the download is successful:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ wc -l 0_2M_nyc_taxi_and_building.csv
</pre></div>
</div>
</div>
<div class="section" id="install-dependent-packages">
<h3>Install dependent packages<a class="headerlink" href="#install-dependent-packages" title="Permalink to this headline">¶</a></h3>
<p>Sample codes in this article call Arctern RESTful API using the <code class="docutils literal notranslate"><span class="pre">request</span></code> library of Python. Run the command below to install <code class="docutils literal notranslate"><span class="pre">request</span></code>:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ pip install requests
</pre></div>
</div>
</div>
</div>
<div class="section" id="call-api">
<h2>Call API<a class="headerlink" href="#call-api" title="Permalink to this headline">¶</a></h2>
<p>In the following example, assume the IP address is <code class="docutils literal notranslate"><span class="pre">127.0.0.1</span></code> and the RESTful service port is <code class="docutils literal notranslate"><span class="pre">8080</span></code>. If you have specified IP address and service port when starting arctern-server, use your specified IP and service port.</p>
<div class="section" id="import-data">
<h3>Import data<a class="headerlink" href="#import-data" title="Permalink to this headline">¶</a></h3>
<p>Use the <code class="docutils literal notranslate"><span class="pre">/loadfile</span></code> interface to import the New York taxi dataset and name the corresponding data table <code class="docutils literal notranslate"><span class="pre">raw_data</span></code>.</p>
<blockquote>
<div><p><strong>Note:</strong> You need to replace <code class="docutils literal notranslate"><span class="pre">file_path</span></code> in the sample code with the absolute path to the data file.</p>
</div></blockquote>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">requests</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">json</span>
<span class="gp">&gt;&gt;&gt; </span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">file_path</span> <span class="o">=</span> <span class="s2">&quot;/example/data/0_2M_nyc_taxi_and_building.csv&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">payload</span> <span class="o">=</span> <span class="p">{</span>
<span class="gp">... </span><span class="s2">&quot;tables&quot;</span><span class="p">:</span> <span class="p">[</span>
<span class="gp">... </span>    <span class="p">{</span>
<span class="gp">... </span>        <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;raw_data&quot;</span><span class="p">,</span>
<span class="gp">... </span>        <span class="s2">&quot;format&quot;</span><span class="p">:</span> <span class="s2">&quot;csv&quot;</span><span class="p">,</span>
<span class="gp">... </span>        <span class="s2">&quot;path&quot;</span><span class="p">:</span> <span class="n">file_path</span><span class="p">,</span>
<span class="gp">... </span>        <span class="s2">&quot;options&quot;</span><span class="p">:</span> <span class="p">{</span>
<span class="gp">... </span>            <span class="s2">&quot;header&quot;</span><span class="p">:</span> <span class="s2">&quot;True&quot;</span><span class="p">,</span>
<span class="gp">... </span>            <span class="s2">&quot;delimiter&quot;</span><span class="p">:</span> <span class="s2">&quot;,&quot;</span>
<span class="gp">... </span>        <span class="p">},</span>
<span class="gp">... </span>        <span class="s2">&quot;schema&quot;</span><span class="p">:</span> <span class="p">[</span>
<span class="gp">... </span>            <span class="p">{</span><span class="s2">&quot;VendorID&quot;</span><span class="p">:</span> <span class="s2">&quot;string&quot;</span><span class="p">},</span>
<span class="gp">... </span>            <span class="p">{</span><span class="s2">&quot;tpep_pickup_datetime&quot;</span><span class="p">:</span> <span class="s2">&quot;string&quot;</span><span class="p">},</span>
<span class="gp">... </span>            <span class="p">{</span><span class="s2">&quot;tpep_dropoff_datetime&quot;</span><span class="p">:</span> <span class="s2">&quot;string&quot;</span><span class="p">},</span>
<span class="gp">... </span>            <span class="p">{</span><span class="s2">&quot;passenger_count&quot;</span><span class="p">:</span> <span class="s2">&quot;long&quot;</span><span class="p">},</span>
<span class="gp">... </span>            <span class="p">{</span><span class="s2">&quot;trip_distance&quot;</span><span class="p">:</span> <span class="s2">&quot;double&quot;</span><span class="p">},</span>
<span class="gp">... </span>            <span class="p">{</span><span class="s2">&quot;pickup_longitude&quot;</span><span class="p">:</span> <span class="s2">&quot;double&quot;</span><span class="p">},</span>
<span class="gp">... </span>            <span class="p">{</span><span class="s2">&quot;pickup_latitude&quot;</span><span class="p">:</span> <span class="s2">&quot;double&quot;</span><span class="p">},</span>
<span class="gp">... </span>            <span class="p">{</span><span class="s2">&quot;dropoff_longitude&quot;</span><span class="p">:</span> <span class="s2">&quot;double&quot;</span><span class="p">},</span>
<span class="gp">... </span>            <span class="p">{</span><span class="s2">&quot;dropoff_latitude&quot;</span><span class="p">:</span> <span class="s2">&quot;double&quot;</span><span class="p">},</span>
<span class="gp">... </span>            <span class="p">{</span><span class="s2">&quot;fare_amount&quot;</span><span class="p">:</span> <span class="s2">&quot;double&quot;</span><span class="p">},</span>
<span class="gp">... </span>            <span class="p">{</span><span class="s2">&quot;tip_amount&quot;</span><span class="p">:</span> <span class="s2">&quot;double&quot;</span><span class="p">},</span>
<span class="gp">... </span>            <span class="p">{</span><span class="s2">&quot;total_amount&quot;</span><span class="p">:</span> <span class="s2">&quot;double&quot;</span><span class="p">},</span>
<span class="gp">... </span>            <span class="p">{</span><span class="s2">&quot;buildingid_pickup&quot;</span><span class="p">:</span> <span class="s2">&quot;long&quot;</span><span class="p">},</span>
<span class="gp">... </span>            <span class="p">{</span><span class="s2">&quot;buildingid_dropoff&quot;</span><span class="p">:</span> <span class="s2">&quot;long&quot;</span><span class="p">},</span>
<span class="gp">... </span>            <span class="p">{</span><span class="s2">&quot;buildingtext_pickup&quot;</span><span class="p">:</span> <span class="s2">&quot;string&quot;</span><span class="p">},</span>
<span class="gp">... </span>            <span class="p">{</span><span class="s2">&quot;buildingtext_dropoff&quot;</span><span class="p">:</span> <span class="s2">&quot;string&quot;</span><span class="p">}</span>
<span class="gp">... </span>        <span class="p">]</span>
<span class="gp">... </span>    <span class="p">}</span>
<span class="gp">... </span><span class="p">]</span>
<span class="gp">... </span><span class="p">}</span>
<span class="gp">&gt;&gt;&gt; </span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="n">url</span><span class="o">=</span><span class="s2">&quot;http://127.0.0.1:8080/loadfile&quot;</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;Content-Type&quot;</span><span class="p">:</span> <span class="s2">&quot;application/json&quot;</span><span class="p">},</span> <span class="n">data</span><span class="o">=</span><span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">payload</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">r</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
<span class="go">{</span>
<span class="go">    &#39;code&#39;: 200,</span>
<span class="go">    &#39;message&#39;: &#39;load table successfully!&#39;,</span>
<span class="go">    &#39;status&#39;: &#39;success&#39;</span>
<span class="go">}</span>
</pre></div>
</div>
</div>
<div class="section" id="query-information-from-data-table">
<h3>Query information from data table<a class="headerlink" href="#query-information-from-data-table" title="Permalink to this headline">¶</a></h3>
<p>You have created a data table at backend named <code class="docutils literal notranslate"><span class="pre">raw_data</span></code>. Then, you can use the <code class="docutils literal notranslate"><span class="pre">/table/schema</span></code> interface to query field names and the corresponding data types.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">requests</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="o">=</span><span class="s2">&quot;http://127.0.0.1:8080/table/schema?table=raw_data&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">r</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
<span class="go">{</span>
<span class="go">    &quot;code&quot;: 200,</span>
<span class="go">    &quot;schema&quot;: [</span>
<span class="go">        {</span>
<span class="go">            &quot;col_name&quot;: &quot;VendorID&quot;,</span>
<span class="go">            &quot;data_type&quot;: &quot;string&quot;</span>
<span class="go">        },</span>
<span class="go">        {</span>
<span class="go">            &quot;col_name&quot;: &quot;tpep_pickup_datetime&quot;,</span>
<span class="go">            &quot;data_type&quot;: &quot;string&quot;</span>
<span class="go">        },</span>
<span class="go">        {</span>
<span class="go">            &quot;col_name&quot;: &quot;tpep_dropoff_datetime&quot;,</span>
<span class="go">            &quot;data_type&quot;: &quot;string&quot;</span>
<span class="go">        },</span>
<span class="go">        {</span>
<span class="go">            &quot;col_name&quot;: &quot;passenger_count&quot;,</span>
<span class="go">            &quot;data_type&quot;: &quot;bigint&quot;</span>
<span class="go">        },</span>
<span class="go">        {</span>
<span class="go">            &quot;col_name&quot;: &quot;trip_distance&quot;,</span>
<span class="go">            &quot;data_type&quot;: &quot;double&quot;</span>
<span class="go">        },</span>
<span class="go">        {</span>
<span class="go">            &quot;col_name&quot;: &quot;pickup_longitude&quot;,</span>
<span class="go">            &quot;data_type&quot;: &quot;double&quot;</span>
<span class="go">        },</span>
<span class="go">        {</span>
<span class="go">            &quot;col_name&quot;: &quot;pickup_latitude&quot;,</span>
<span class="go">            &quot;data_type&quot;: &quot;double&quot;</span>
<span class="go">        },</span>
<span class="go">        {</span>
<span class="go">            &quot;col_name&quot;: &quot;dropoff_longitude&quot;,</span>
<span class="go">            &quot;data_type&quot;: &quot;double&quot;</span>
<span class="go">        },</span>
<span class="go">        {</span>
<span class="go">            &quot;col_name&quot;: &quot;dropoff_latitude&quot;,</span>
<span class="go">            &quot;data_type&quot;: &quot;double&quot;</span>
<span class="go">        },</span>
<span class="go">        {</span>
<span class="go">            &quot;col_name&quot;: &quot;fare_amount&quot;,</span>
<span class="go">            &quot;data_type&quot;: &quot;double&quot;</span>
<span class="go">        },</span>
<span class="go">        {</span>
<span class="go">            &quot;col_name&quot;: &quot;tip_amount&quot;,</span>
<span class="go">            &quot;data_type&quot;: &quot;double&quot;</span>
<span class="go">        },</span>
<span class="go">        {</span>
<span class="go">            &quot;col_name&quot;: &quot;total_amount&quot;,</span>
<span class="go">            &quot;data_type&quot;: &quot;double&quot;</span>
<span class="go">        },</span>
<span class="go">        {</span>
<span class="go">            &quot;col_name&quot;: &quot;buildingid_pickup&quot;,</span>
<span class="go">            &quot;data_type&quot;: &quot;bigint&quot;</span>
<span class="go">        },</span>
<span class="go">        {</span>
<span class="go">            &quot;col_name&quot;: &quot;buildingid_dropoff&quot;,</span>
<span class="go">            &quot;data_type&quot;: &quot;bigint&quot;</span>
<span class="go">        },</span>
<span class="go">        {</span>
<span class="go">            &quot;col_name&quot;: &quot;buildingtext_pickup&quot;,</span>
<span class="go">            &quot;data_type&quot;: &quot;string&quot;</span>
<span class="go">        },</span>
<span class="go">        {</span>
<span class="go">            &quot;col_name&quot;: &quot;buildingtext_dropoff&quot;,</span>
<span class="go">            &quot;data_type&quot;: &quot;string&quot;</span>
<span class="go">        }</span>
<span class="go">    ],</span>
<span class="go">    &quot;status&quot;: &quot;success&quot;,</span>
<span class="go">    &quot;table&quot;: &quot;raw_data&quot;</span>
<span class="go">}</span>
</pre></div>
</div>
</div>
<div class="section" id="generate-heat-map">
<h3>Generate heat map<a class="headerlink" href="#generate-heat-map" title="Permalink to this headline">¶</a></h3>
<p>Use the <code class="docutils literal notranslate"><span class="pre">/heatmap</span></code> interface to generate a heat map based on the passenger's dropoff location and total charge for the trip. Red areas represent high cost while green areas represent low cost. The specific parameters of the heat map are explained in <a class="reference external" href="./api/function/heatmap.html">Heat map RESTful API</a>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">requests</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">json</span>
<span class="gp">&gt;&gt;&gt; </span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">payload</span> <span class="o">=</span> <span class="p">{</span>
<span class="gp">... </span><span class="s2">&quot;input_data&quot;</span><span class="p">:</span> <span class="p">{</span>
<span class="gp">... </span>    <span class="s2">&quot;points&quot;</span><span class="p">:</span> <span class="s2">&quot;ST_Point(raw_data.pickup_longitude, raw_data.pickup_latitude)&quot;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="s2">&quot;weights&quot;</span><span class="p">:</span> <span class="s2">&quot;raw_data.fare_amount&quot;</span>
<span class="gp">... </span><span class="p">},</span>
<span class="gp">... </span><span class="s2">&quot;params&quot;</span><span class="p">:</span> <span class="p">{</span>
<span class="gp">... </span>    <span class="s2">&quot;width&quot;</span><span class="p">:</span> <span class="mi">512</span><span class="p">,</span>
<span class="gp">... </span>    <span class="s2">&quot;height&quot;</span><span class="p">:</span> <span class="mi">448</span><span class="p">,</span>
<span class="gp">... </span>    <span class="s2">&quot;bounding_box&quot;</span><span class="p">:</span> <span class="p">[</span>
<span class="gp">... </span>        <span class="o">-</span><span class="mf">74.01556543545699</span><span class="p">,</span>
<span class="gp">... </span>        <span class="mf">40.69354738164881</span><span class="p">,</span>
<span class="gp">... </span>        <span class="o">-</span><span class="mf">73.9434424136598</span><span class="p">,</span>
<span class="gp">... </span>        <span class="mf">40.780921656427836</span>
<span class="gp">... </span>    <span class="p">],</span>
<span class="gp">... </span>    <span class="s2">&quot;coordinate_system&quot;</span><span class="p">:</span> <span class="s2">&quot;EPSG:4326&quot;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="s2">&quot;map_zoom_level&quot;</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span>
<span class="gp">... </span>    <span class="s2">&quot;aggregation_type&quot;</span><span class="p">:</span> <span class="s2">&quot;sum&quot;</span>
<span class="gp">... </span><span class="p">}</span>
<span class="gp">... </span><span class="p">}</span>
<span class="gp">&gt;&gt;&gt; </span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="n">url</span><span class="o">=</span><span class="s2">&quot;http://127.0.0.1:8080/heatmap&quot;</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;Content-Type&quot;</span><span class="p">:</span> <span class="s2">&quot;application/json&quot;</span><span class="p">},</span> <span class="n">data</span><span class="o">=</span><span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">payload</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">base64</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s2">&quot;/tmp/heatmap.png&quot;</span><span class="p">,</span> <span class="s2">&quot;wb&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
<span class="gp">... </span>    <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">base64</span><span class="o">.</span><span class="n">b64decode</span><span class="p">(</span><span class="n">r</span><span class="o">.</span><span class="n">json</span><span class="p">()[</span><span class="s1">&#39;result&#39;</span><span class="p">]))</span>
</pre></div>
</div>
<p>The resulting heat map is as follows:</p>
<p><img alt="Heat map" src="../_images/heatmap.png" /></p>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="restful_quick_start_on_spark.html" class="btn btn-neutral float-right" title="Quick Start (PySpark backend)" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="../install/webserver_installation_config.html" class="btn btn-neutral float-left" title="Install and deploy Arctern RESTful server" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright 2020, zilliz
      <span class="lastupdated">
        Last updated on Aug 04, 2020.
      </span>

    </p>
  </div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>